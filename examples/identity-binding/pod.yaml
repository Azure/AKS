apiVersion: v1
kind: Pod
metadata:
  name: my-first-ib-pod
  namespace: default
  labels:
    azure.workload.identity/use: "true"
  annotations:
    azure.workload.identity/use-identity-binding: "true"
spec:
  serviceAccount: default
  containers:
    - name: azure-sdk
      # source code: https://github.com/Azure/azure-workload-identity/blob/feature/custom-token-endpoint/examples/identitybinding-msal-go/main.go
      image: ghcr.io/bahe-msft/azure-workload-identity/identitybinding-msal-go@sha256:db1565bc57a2f1ed137d4cba8e79342f33a35bdeea4372509cf01b009f510730
      env:
        - name: KEYVAULT_URL
          value: https://<your-keyvault-name>.vault.azure.net/
        - name: SECRET_NAME
          value: <secret-name>
  restartPolicy: Never